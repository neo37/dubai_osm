# Dubai Housing Export โ README

| ๐ย**ะะตะฝั** | **English**          | **ุงูุนุฑุจูุฉ**      | **ะัััะบะธะน**                     |
| ----------- | -------------------- | ---------------- | ------------------------------- |
| 1           | Quickยstart          | ุงูุจุฏุกยุงูุณุฑูุน     | ะัััััะนยััะฐัั                   |
| 2           | Requirements         | ุงููุชุทูุจุงุช        | ะขัะตะฑะพะฒะฐะฝะธั                      |
| 3           | Installation         | ุงูุชุซุจูุช          | ะฃััะฐะฝะพะฒะบะฐ                       |
| 4           | Parameters           | ุงููุนููุงุช         | ะะฐัะฐะผะตััั                       |
| 5           | What the script does | ููู ูุนูู ุงูุณูุฑุจุช | ะงัะพ ะดะตะปะฐะตัยัะบัะธะฟั               |
| 6           | Output files         | ูููุงุชยุงูุฅุฎุฑุงุฌ    | ะััะพะดะฝัะตยัะฐะนะปั                  |
| 7           | Customisation        | ุงูุชุฎุตูุต          | ะะฐัััะพะนะบะฐ                       |
| 8           | Performance notes    | ููุงุญุธุงุชยุงูุฃุฏุงุก   | ะะฐะผะตัะฐะฝะธัยะฟะพยะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ |
| 9           | Troubleshooting      | ุงุณุชูุดุงูยุงูุฃุฎุทุงุก  | ะะพะธัะบยะฟัะพะฑะปะตะผ                   |
| 10          | License              | ุงูุฑุฎุตุฉ           | ะะธัะตะฝะทะธั                        |

---

## 1ยยทยQuickยstart | ุงูุจุฏุกยุงูุณุฑูุน | ะัััััะนยััะฐัั

```bash
# 1ยโ ัะพะทะดะฐะนัะต ะธ ะฐะบัะธะฒะธััะนัะต ะฒะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต
python -m venv venv && source venv/bin/activate

# 2ยโ ัััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ
pip install --upgrade osmnx geopandas pandas shapely pyproj openpyxl

# 3ยโ ะทะฐะฟัััะธัะต
python dubai_housing_export.py
```

ะะฐะฟััะบ ัะบัะธะฟัะฐ ะทะฐะณััะทะธั ะธะทยOpenStreetMap **ะฒัะต ะถะธะปัะต ะทะดะฐะฝะธั ะัะฑะฐั, ัยะบะพัะพััั ะตััั ะฐะดัะตั**,
ัะฐัะฟัะตะดะตะปะธั ะธัยะฟะพยัะฐะนะพะฝะฐะผ/ะผัะฝะธัะธะฟะฐะปะธัะตัั, ะฒัะฒะตะดะตั ะฒยะบะพะฝัะพะปั ะธยัะพััะฐะฝะธั ะฒย`dubai_housing_details.xlsx`.

---

## 2ยยทยRequirements | ุงููุชุทูุจุงุช | ะขัะตะฑะพะฒะฐะฝะธั

| ะะฐะบะตั                                     | ะะธะฝะธะผะฐะปัะฝะฐัยะฒะตััะธั | ะะฐะทะฝะฐัะตะฝะธะต                               |
| ----------------------------------------- | ------------------ | ---------------------------------------- |
| Python                                    | 3.9+               | ะธะฝัะตัะฟัะตัะฐัะพั                            |
| [OSMnx](https://github.com/gboeing/osmnx) | 2.1                | ะทะฐะฟัะพัั ะบยOverpass / ะพะฑัะฐะฑะพัะบะฐ ะณะตะพะผะตััะธะธ |
| GeoPandas                                 | 0.14               | ะฟัะพัััะฐะฝััะฒะตะฝะฝัะต DataFrameโั ะธยjoinโั    |
| Shapelyย2                                 | 2.0                | ะณะตะพโะพะฟะตัะฐัะธะธ                             |
| pandas                                    | 2.2                | ัะฐะฑะปะธัะฝัะต ะดะฐะฝะฝัะต / Excel export          |
| pyproj                                    | 3.6                | ะฟัะพะตะบัะธะธ CRS                             |
| openpyxl                                  | 3.1                | ะทะฐะฟะธัั XLSX                              |

> **Tip:** ะะฐโฏWindows easiestยโ ัััะฐะฝะพะฒะธัั [OSGeo4Wโshell](https://trac.osgeo.org/osgeo4w/) ะธะปะธ WSL/Ubuntu.

---

## 3ยยทยInstallation | ุงูุชุซุจูุช | ะฃััะฐะฝะพะฒะบะฐ

1. **ะกะธััะตะผะฐ GISโะทะฐะฒะธัะธะผะพััะตะน**: `aptโฏinstall gdal-bin libspatialindex-dev`, ะธะฝะฐัะต GeoPandas ะผะพะถะตั ะฝะต ัะพะฑัะฐัััั.
2. ะะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต (ัะผ. Quickยstart).
3. `pip install` ะทะฐะฒะธัะธะผะพััะตะน.
4. ะกะพััะฐะฝะธัะต `dubai_housing_export.py` ะฒยะปัะฑะพะน ะบะฐัะฐะปะพะณ ะธยะทะฐะฟัััะธัะต.

---

## 4ยยทยParameters | ุงููุนููุงุช | ะะฐัะฐะผะตััั

ะัะต ะฟะตัะตะผะตะฝะฝัะต ะฝะฐัะพะดัััั ะฒยะฑะปะพะบะต **CONFIG** ะฒยะฝะฐัะฐะปะต ัะบัะธะฟัะฐ.

| ะะตัะตะผะตะฝะฝะฐั      | ะงัะพ ะดะตะปะฐะตั                                                           | ะะฝะฐัะตะฝะธะตยะฟะพยัะผะพะปัะฐะฝะธั                          |
| --------------- | -------------------------------------------------------------------- | ---------------------------------------------- |
| `GRID_N`        | ะะฐะทะฑะธะฒะฐะตั bounding box ะฝะฐย`NโฏรโฏN` ัะฐะนะปะพะฒ โ ััะพะปัะบะพ Overpassโะทะฐะฟัะพัะพะฒ | `6` โย36ยะทะฐะฟัะพัะพะฒ                              |
| `BUILDING_TAGS` | ะะฐะบะธะต ะทะดะฐะฝะธั ะทะฐะฟัะฐัะธะฒะฐัั                                             | `residential`, `apartments`, `house`           |
| `ADDR_COLS`     | ะะฐะบะธะต ัะตะณะธ ััะธัะฐัั ยซะฐะดัะตัะพะผยป                                         | `addr:housenumber`, `addr:street`, `addr:full` |
| `TARGET_COLS`   | ะะพััะดะพะบ/ัะพััะฐะฒ ััะพะปะฑัะพะฒ ะฒยExcel                                      | ัะผ.ยัะบัะธะฟั                                     |
| `OUT_XLSX`      | ะะผั ะฒััะพะดะฝะพะณะพ ัะฐะนะปะฐ                                                  | `dubai_housing_details.xlsx`                   |

---

## 5ยยทยWhat the script does | ููู ูุนูู ุงูุณูุฑุจุช | ะงัะพ ะดะตะปะฐะตัยัะบัะธะฟั

1. **ะะพะบั ะัะฑะฐั** โ ะฑะตััััั ะฐะดะผะธะฝะธัััะฐัะธะฒะฝัะน ะฟะพะปะธะณะพะฝ ััะพะฒะฝัย8, ััะธัะฐะตััั bbox.
2. **ะกะตัะบะฐ** โ bbox ัะฐะทะฑะธะฒะฐะตััั ะฝะฐ `GRID_NรGRID_N` ัะฐะนะปะพะฒ.
3. **ะะฐะฟัะพั** โ ะดะปั ะบะฐะถะดะพะณะพ ัะฐะนะปะฐ ะฒัะฟะพะปะฝัะตััั `ox.features_from_bbox(bbox, BUILDING_TAGS)`.
4. **ะคะธะปััั ะฐะดัะตัะฐ** โ ะพััะฐัััั ัะพะปัะบะพ ัะปะตะผะตะฝัั, ะธะผะตััะธะต *ะปัะฑะพะน* `ADDR_COLS`โัะตะณ.
5. **Spatial join** โ ะบะฐะถะดะพะผั ะทะดะฐะฝะธั ะฟัะธัะฒะฐะธะฒะฐะตััั:

   * ัะฐะนะพะฝ (*district*, admin\_levelย10),
   * ะผัะฝะธัะธะฟะฐะปะธัะตั (*municipality*, admin\_levelย8).
6. **ะะพะฝัะพะปั** โ ะฒะตัั DataFrame ัะฐะนะปะฐ ะฟะตัะฐัะฐะตััั, ััะพะฑั ะฒะธะดะตัั ยซัััะพะนยปยัะตะทัะปััะฐั.
7. **Excel** โ DataFrame ะดะพะฟะธััะฒะฐะตััั ะฒยะปะธัั `Housing`.
8. ะยะบะพะฝัะต ะฒัะฒะพะดะธััั ะธัะพะณะพะฒะพะต ัะธัะปะพ ัะพััะฐะฝัะฝะฝัั ัััะพะบ.

---

## 6ยยทยOutput files | ูููุงุชยุงูุฅุฎุฑุงุฌ | ะััะพะดะฝัะตยัะฐะนะปั

* **`dubai_housing_details.xlsx`** โ ะพะดะฝะฐ ัะฐะฑะปะธัะฐ ยซHousingยป. ะะฐะถะดัะน ััะดยโ
  ะพะดะฝะพ ะทะดะฐะฝะธะต, ัยะบะพัะพัะพะณะพ *ะพะฑัะทะฐัะตะปัะฝะพ ะตััั* ะฐะดัะตั.

| ะัะธะผะตั ััะพะปะฑัะพะฒ                                      | ะะฟะธัะฐะฝะธะต             |
| ---------------------------------------------------- | -------------------- |
| `osmid`                                              | ID ะพะฑัะตะบัะฐ ะฒยOSM     |
| `name`                                               | ะะฐะทะฒะฐะฝะธะต (ะตัะปะธ ะตััั) |
| `addr:housenumber` / `addr:street` / `addr:postcode` | ะะดัะตั                |
| `district`                                           | ะะฐะนะพะฝ / community    |
| `municipality`                                       | Dubai                |
| `levels` / `height`                                  | ะญัะฐะถะฝะพััั / ะฒััะพัะฐ   |

---

## 7ยยทยCustomisation | ุงูุชุฎุตูุต | ะะฐัััะพะนะบะฐ

* **ะะฐะฟัะพั ะดััะณะธั ัะธะฟะพะฒ ะทะดะฐะฝะธะน** โ ะดะพะฑะฐะฒััะต ะทะฝะฐัะตะฝะธั ะฒย`BUILDING_TAGS`.
* **ะฃะฒะตะปะธัะธัั ะดะตัะฐะปะธะทะฐัะธั** โ `GRID_N = 8` โ 64 ะผะฐะปะตะฝัะบะธั ะทะฐะฟัะพัะพะฒ (ะผะตะดะปะตะฝะฝะตะต, ะฝะพ ะฝะฐะดัะถะฝะตะต ะฟัะธยัะฐะนะผโะฐััะฐั).
* **CSV ะฒะผะตััะพยExcel**:

  ```python
  df.to_csv("dubai_housing_details.csv", mode="a",
            header=not Path("dubai_housing_details.csv").exists(),
            index=False)
  ```
* **GeoPackage** ะดะปั GISโะะ:

  ```python
  df.to_file("dubai_housing.gpkg", layer="housing", driver="GPKG",
             mode="a", index=False)
  ```

---

## 8ยยทยPerformance notes | ููุงุญุธุงุชยุงูุฃุฏุงุก | ะะฐะผะตัะฐะฝะธัยะฟะพยะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

* Overpass ะพะณัะฐะฝะธัะธะฒะฐะตั ะฟะปะพัะฐะดั ะพะดะฝะพะณะพ ะทะฐะฟัะพัะฐ โยัะบัะธะฟั ะดะตะปะธั ัะตะณะธะพะฝ ะฝะฐยัะฐะนะปั.
* ะัะปะธ Overpass ะฒััโัะฐะบะธ ัะฒัั ัะพะตะดะธะฝะตะฝะธะต โ ัะฒะตะปะธัััะต `GRID_N` (ะผะตะฝััะต bbox โ ะผะตะฝััะต ะดะฐะฝะฝัั ะฝะฐ ะทะฐะฟัะพั).
* GeoPandas + Shapelyย2 ะดะพััะฐัะพัะฝะพ ะฑััััั, ะฝะพ ะฟัะธ ัะพัะฝัั ััััั ะพะฑัะตะบัะพะฒ
  spatial join ะผะพะถะตั ะทะฐะฝััั ะฟะฐัั ะผะธะฝัั.
* Excelโะทะฐะฟะธัั ะฟะพัะพะบะพะฒะฐั, ะฟะพััะพะผั ะฟะฐะผััั ะฟัะฐะบัะธัะตัะบะธ ะฝะต ัะฐัััั.

---

## 9ยยทยTroubleshooting | ุงุณุชูุดุงูยุงูุฃุฎุทุงุก | ะะพะธัะบยะฟัะพะฑะปะตะผ

| ะกะธะผะฟัะพะผ                                       | ะัะธัะธะฝะฐ / ะปะตัะตะฝะธะต                                             |
| --------------------------------------------- | ------------------------------------------------------------- |
| `No matching features`                        | ะยะบะพะฝะบัะตัะฝะพะผ ัะฐะนะปะต ะฝะตั ะทะดะฐะฝะธะน ั ะฐะดัะตัะพะผยโ ะฝะพัะผะฐ.              |
| `features_from_bbox() timeout`                | Overpass ะฟะตัะตะณััะถะตะฝ: ัะฒะตะปะธัััะต `GRID_N` ะธะปะธ ะฟะพะฟัะพะฑัะนัะต ะฟะพะทะถะต. |
| `right_df should be GeoDataFrame`             | ะะทะผะตะฝะตะฝะฐยะปะพะณะธะบะฐ join: ะพะฑะฝะพะฒะธัะต ัะบัะธะฟั (vโฏโฅโฏ2025โ05โ14).       |
| `UserWarning: area is X times max query area` | OSMnx ัะฐะผ ัะฐะทะพะฑััั ะทะฐะฟัะพัยโ ะฟัะพััะพ ะฟะพะดะพะถะดะธัะต.                 |

---

## 10ยยทยLicense | ุงูุฑุฎุตุฉ | ะะธัะตะฝะทะธั

MIT License ยฉย2025 YourยName.
ะัะฝะพะฒะฐะฝะพ ะฝะฐ ะดะฐะฝะฝัั ยฉยOpenStreetMapยcontributorsย(ODbL).
